-- ============================================
-- ğŸ”¥ BLOX FRUITS ULTIMATE FARM V3 ğŸ”¥
--      Made by Dev.Gani
--      Discord: d.6a
-- ============================================
print("\n" .. string.rep("ğŸ”¥", 50))
print("ğŸ”¥ BLOX FRUITS ULTIMATE FARM V3 ğŸ”¥")
print("      Made by Dev.Gani")
print("      Discord: d.6a")
print(string.rep("ğŸ”¥", 50) .. "\n")

-- âš¡ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
getgenv().Server_Hop = true
getgenv().Chest_Farm = true
getgenv().wait_Time = 90
getgenv().AutoStopOnGodChalice = true

-- ğŸ’¾ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
local settingsFile = "DevGani_Settings.json"
pcall(function()
    local s = game:GetService('HttpService'):JSONDecode(readfile(settingsFile))
    getgenv().AutoStopOnGodChalice = s.AutoStopOnGodChalice or true
end)

-- ğŸ¨ Ø¥Ø´Ø¹Ø§Ø± Dev.Gani Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©
spawn(function()
    wait(1)
    local gui = Instance.new("ScreenGui")
    gui.Name = "DevGaniNotif"
    gui.Parent = game:GetService("CoreGui")
    
    local frame = Instance.new("Frame")
    frame.Parent = gui
    frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    frame.BackgroundTransparency = 0.2
    frame.BorderSizePixel = 0
    frame.Position = UDim2.new(0.75, 0, 0.02, 0)
    frame.Size = UDim2.new(0.22, 0, 0.06, 0)
    
    local corner = Instance.new("UICorner")
    corner.Parent = frame
    corner.CornerRadius = UDim.new(0, 10)
    
    local text = Instance.new("TextLabel")
    text.Parent = frame
    text.Size = UDim2.new(1, 0, 1, 0)
    text.BackgroundTransparency = 1
    text.Text = "ğŸ”¥ Made by Dev.Gani\nğŸ’¬ Discord: d.6a"
    text.TextColor3 = Color3.fromRGB(255, 100, 100)
    text.TextScaled = true
    text.Font = Enum.Font.GothamBold
    text.TextStrokeTransparency = 0.5
    
    wait(20)
    gui:Destroy()
end)

-- ğŸ® Ø²Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø£Ù†ÙŠÙ‚
spawn(function()
    wait(2)
    local s = Instance.new("ScreenGui")
    s.Name = "DevGaniControl"
    s.Parent = game:GetService("CoreGui")
    s.ResetOnSpawn = false
    
    local f = Instance.new("Frame")
    f.Parent = s
    f.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    f.BackgroundTransparency = 0.15
    f.BorderSizePixel = 0
    f.Position = UDim2.new(0.85, 0, 0.1, 0)
    f.Size = UDim2.new(0, 60, 0, 60)
    
    Instance.new("UICorner").Parent = f.CornerRadius = UDim.new(0, 30)
    
    local b = Instance.new("TextButton")
    b.Parent = f
    b.Size = UDim2.new(1, 0, 1, 0)
    b.BackgroundColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
    b.BackgroundTransparency = 0.2
    b.Text = getgenv().AutoStopOnGodChalice and "âœ…" or "âŒ"
    b.TextColor3 = Color3.fromRGB(255, 255, 255)
    b.TextScaled = true
    b.Font = Enum.Font.GothamBold
    b.BorderSizePixel = 0
    
    Instance.new("UICorner").Parent = b.CornerRadius = UDim.new(0, 30)
    
    local t = Instance.new("TextLabel")
    t.Parent = s
    t.BackgroundTransparency = 1
    t.Position = UDim2.new(0.85, 70, 0.1, 15)
    t.Size = UDim2.new(0, 150, 0, 30)
    t.Text = "God Chalice Stop"
    t.TextColor3 = Color3.fromRGB(255, 255, 255)
    t.TextScaled = true
    t.Font = Enum.Font.GothamBold
    t.TextXAlignment = Enum.TextXAlignment.Left
    
    b.MouseButton1Click:Connect(function()
        getgenv().AutoStopOnGodChalice = not getgenv().AutoStopOnGodChalice
        b.BackgroundColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
        b.Text = getgenv().AutoStopOnGodChalice and "âœ…" or "âŒ"
        writefile(settingsFile, game:GetService('HttpService'):JSONEncode({AutoStopOnGodChalice = getgenv().AutoStopOnGodChalice}))
        print(getgenv().AutoStopOnGodChalice and "ğŸŸ¢ Auto-stop ON" or "ğŸ”´ Auto-stop OFF")
    end)
end)

-- ğŸ‘‘ Ø§Ø®ØªÙŠØ§Ø± ÙØ±ÙŠÙ‚ Pirates (Ù…Ø¶Ù…ÙˆÙ† 100%)
spawn(function()
    wait(1.5)
    print("âš”ï¸ Selecting Pirates team...")
    local attempts = 0
    repeat
        attempts = attempts + 1
        pcall(function()
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("SetTeam", "Pirates")
        end)
        wait(0.5)
        if game.Players.LocalPlayer.Team and game.Players.LocalPlayer.Team.Name == "Pirates" then
            print("âœ… Pirates team selected successfully!")
            break
        end
    until attempts >= 10
end)

-- ğŸ’ Ù…Ø±Ø§Ù‚Ø¨Ø© God Chalice Ùˆ Fist of Darkness
spawn(function()
    while wait(1) do
        if getgenv().AutoStopOnGodChalice and getgenv().Chest_Farm then
            pcall(function()
                for _, o in pairs(workspace:GetDescendants()) do
                    if (o:IsA("Tool") or o:IsA("Part")) and (o.Name == "God Chalice" or o.Name == "Fist of Darkness") then
                        print("\nğŸ’ğŸ’ğŸ’ " .. o.Name .. " DETECTED! ğŸ’ğŸ’ğŸ’")
                        print("â¸ï¸ Chest farm stopped - Go take your item!")
                        getgenv().Chest_Farm = false
                        
                        local n = Instance.new("ScreenGui")
                        n.Parent = game:GetService("CoreGui")
                        n.Name = "ItemAlert"
                        
                        local fr = Instance.new("Frame")
                        fr.Parent = n
                        fr.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
                        fr.BackgroundTransparency = 0.2
                        fr.Position = UDim2.new(0.5, -150, 0.5, -50)
                        fr.Size = UDim2.new(0, 300, 0, 100)
                        
                        Instance.new("UICorner").Parent = fr.CornerRadius = UDim.new(0, 10)
                        
                        local tx = Instance.new("TextLabel")
                        tx.Parent = fr
                        tx.Size = UDim2.new(1, 0, 1, 0)
                        tx.BackgroundTransparency = 1
                        tx.Text = "ğŸ’ " .. o.Name .. " FOUND!\nâ¸ï¸ Farm Stopped"
                        tx.TextColor3 = Color3.fromRGB(255, 215, 0)
                        tx.TextScaled = true
                        tx.Font = Enum.Font.GothamBold
                        
                        wait(5)
                        n:Destroy()
                        break
                    end
                end
            end)
        end
    end
end)

-- ğŸ“¦ Ù†Ø¸Ø§Ù… Ø¬Ù…Ø¹ Ø§Ù„ØµØ¯ÙˆØ± (Ø³Ø±Ø¹Ø© Ø®Ø§Ø±Ù‚Ø©)
spawn(function()
    wait(3)
    while task.wait(0.25) do
        if getgenv().Chest_Farm and game.Players.LocalPlayer.Character then
            pcall(function()
                local hrp = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                if not hrp then return end
                
                local chests = {}
                for _, o in pairs(workspace:GetDescendants()) do
                    if o:IsA("BasePart") and (o.Name == "Chest3" or o.Name == "Chest2" or o.Name == "Chest1") then
                        table.insert(chests, {
                            part = o,
                            name = o.Name,
                            dist = (hrp.Position - o.Position).Magnitude,
                            priority = o.Name == "Chest3" and 1 or o.Name == "Chest2" and 2 or 3
                        })
                    end
                end
                
                table.sort(chests, function(a, b)
                    if a.priority == b.priority then return a.dist < b.dist end
                    return a.priority < b.priority
                end)
                
                for _, c in ipairs(chests) do
                    if not getgenv().Chest_Farm then break end
                    
                    hrp.CFrame = c.part.CFrame * CFrame.new(0, 2, 0)
                    task.wait(0.08)
                    
                    for i = 1, 4 do
                        firetouchinterest(hrp, c.part, 0)
                        task.wait(0.01)
                        firetouchinterest(hrp, c.part, 1)
                        task.wait(0.01)
                    end
                    
                    if c.name == "Chest3" then print("ğŸ’° Chest3 +2000") end
                end
            end)
        end
    end
end)

-- ğŸ”¥ ÙƒØ´Ù Ø§Ù„ÙƒÙŠÙƒ
repeat wait() until game.CoreGui:FindFirstChild('RobloxPromptGui')
local po = game.CoreGui.RobloxPromptGui.promptOverlay
local ts = game:GetService('TeleportService')

po.ChildAdded:Connect(function(a)
    if a.Name == 'ErrorPrompt' then
        print("\nğŸš¨ KICK DETECTED! REJOINING...")
        repeat
            ts:Teleport(game.PlaceId)
            wait(2)
        until false
    end
end)

-- ğŸ”„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø³ÙŠØ±ÙØ±
local PlaceID = game.PlaceId
local AllIDs = {}
pcall(function() AllIDs = game:GetService('HttpService'):JSONDecode(readfile("NotSameServers.json")) end)

function TPReturner()
    local Site = game.HttpService:JSONDecode(game:HttpGet('https://games.roblox.com/v1/games/' .. PlaceID .. '/servers/Public?sortOrder=Asc&limit=100'))
    for _, v in pairs(Site.data) do
        if v.playing < v.maxPlayers then
            local ID = tostring(v.id)
            local possible = true
            for _, e in pairs(AllIDs) do if ID == tostring(e) then possible = false break end end
            if possible then
                table.insert(AllIDs, ID)
                writefile("NotSameServers.json", game:GetService('HttpService'):JSONEncode(AllIDs))
                game:GetService("TeleportService"):TeleportToPlaceInstance(PlaceID, ID, game.Players.LocalPlayer)
                wait(4)
            end
        end
    end
end

function Teleport()
    print("ğŸ”„ Server hopping...")
    TPReturner()
end

-- ğŸš€ Ø§Ù„Ù‚ÙØ² Ø§Ù„Ø¹Ø§Ø¯ÙŠ
spawn(function()
    while wait() do
        if getgenv().Server_Hop then
            wait(getgenv().wait_Time)
            Teleport()
        end
    end
end)

-- âœ… Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙØ¹ÙŠÙ„
print("\n" .. string.rep("âš¡", 30))
print("âš¡ ULTIMATE FARM V3 ACTIVATED! âš¡")
print("âœ… Made by Dev.Gani | Discord: d.6a")
print("âœ… Pirates team: AUTO-SELECT")
print("âœ… Chest farm: HYPER SPEED (0.25s)")
print("âœ… God Chalice: PROTECTED")
print(string.rep("âš¡", 30) .. "\n") 
