-- ============================================
-- üî• BLOX FRUITS ULTIMATE FARM V4 üî•
--      Made by Dev.Gani
--      Discord: d.6a
-- ============================================
print("\n" .. string.rep("üî•", 50))
print("üî• BLOX FRUITS ULTIMATE FARM V4 üî•")
print("      Made by Dev.Gani")
print("      Discord: d.6a")
print(string.rep("üî•", 50) .. "\n")

-- ‚ö° ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™
getgenv().Server_Hop = true
getgenv().Chest_Farm = true
getgenv().wait_Time = 90
getgenv().AutoStopOnGodChalice = true

-- üíæ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ + ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸÑŸÅ
local settingsFile = "DevGani_Settings.json"
local function loadSettings()
    local success, result = pcall(function()
        return game:GetService('HttpService'):JSONDecode(readfile(settingsFile))
    end)
    if success then
        getgenv().AutoStopOnGodChalice = result.AutoStopOnGodChalice
        print("‚úÖ Settings loaded: " .. (getgenv().AutoStopOnGodChalice and "ON" or "OFF"))
    else
        local defaultSettings = {AutoStopOnGodChalice = true}
        writefile(settingsFile, game:GetService('HttpService'):JSONEncode(defaultSettings))
        getgenv().AutoStopOnGodChalice = true
        print("üìÅ New settings file created - Auto-stop: ON")
    end
end
loadSettings()

-- üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™
local function saveSettings()
    local settings = {AutoStopOnGodChalice = getgenv().AutoStopOnGodChalice}
    writefile(settingsFile, game:GetService('HttpService'):JSONEncode(settings))
end

-- üé® ÿ•ÿ¥ÿπÿßÿ± Dev.Gani
spawn(function()
    wait(1)
    local gui = Instance.new("ScreenGui")
    gui.Name = "DevGaniNotif"
    gui.Parent = game:GetService("CoreGui")
    gui.ResetOnSpawn = false
    
    local frame = Instance.new("Frame")
    frame.Parent = gui
    frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    frame.BackgroundTransparency = 0.1
    frame.BorderSizePixel = 0
    frame.Position = UDim2.new(0.78, 0, 0.85, 0)
    frame.Size = UDim2.new(0, 200, 0, 50)
    frame.AnchorPoint = Vector2.new(0.5, 0.5)
    
    local corner = Instance.new("UICorner")
    corner.Parent = frame
    corner.CornerRadius = UDim.new(0, 8)
    
    local line = Instance.new("Frame")
    line.Parent = frame
    line.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    line.BorderSizePixel = 0
    line.Position = UDim2.new(0, 0, 0, 0)
    line.Size = UDim2.new(0, 4, 1, 0)
    
    local lineCorner = Instance.new("UICorner")
    lineCorner.Parent = line
    lineCorner.CornerRadius = UDim.new(0, 4)
    
    local text = Instance.new("TextLabel")
    text.Parent = frame
    text.Size = UDim2.new(1, -10, 1, 0)
    text.Position = UDim2.new(0, 10, 0, 0)
    text.BackgroundTransparency = 1
    text.Text = "üî• Dev.Gani\nüí¨ d.6a"
    text.TextColor3 = Color3.fromRGB(255, 255, 255)
    text.TextScaled = true
    text.Font = Enum.Font.GothamSemibold
    text.TextXAlignment = Enum.TextXAlignment.Left
    
    wait(20)
    gui:Destroy()
end)

-- üéÆ ÿ≤ÿ± ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ£ŸÜŸäŸÇ V2
spawn(function()
    wait(2)
    local s = Instance.new("ScreenGui")
    s.Name = "DevGaniControl"
    s.Parent = game:GetService("CoreGui")
    s.ResetOnSpawn = false
    s.IgnoreGuiInset = true
    
    local main = Instance.new("Frame")
    main.Parent = s
    main.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    main.BackgroundTransparency = 0.15
    main.BorderSizePixel = 0
    main.Position = UDim2.new(0.03, 0, 0.15, 0)
    main.Size = UDim2.new(0, 240, 0, 70)
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.Parent = main
    mainCorner.CornerRadius = UDim.new(0, 12)
    
    local stroke = Instance.new("UIStroke")
    stroke.Parent = main
    stroke.Color = Color3.fromRGB(80, 80, 80)
    stroke.Thickness = 1.5
    stroke.Transparency = 0.3
    
    local shadow = Instance.new("ImageLabel")
    shadow.Parent = main
    shadow.BackgroundTransparency = 1
    shadow.Position = UDim2.new(0, -5, 0, -5)
    shadow.Size = UDim2.new(1, 10, 1, 10)
    shadow.Image = "rbxassetid://1316045217"
    shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
    shadow.ImageTransparency = 0.7
    shadow.ScaleType = Enum.ScaleType.Slice
    shadow.SliceCenter = Rect.new(10, 10, 118, 118)
    
    local iconFrame = Instance.new("Frame")
    iconFrame.Parent = main
    iconFrame.BackgroundColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 180, 0) or Color3.fromRGB(180, 0, 0)
    iconFrame.BackgroundTransparency = 0.1
    iconFrame.BorderSizePixel = 0
    iconFrame.Position = UDim2.new(0, 10, 0.5, -20)
    iconFrame.Size = UDim2.new(0, 40, 0, 40)
    
    local iconCorner = Instance.new("UICorner")
    iconCorner.Parent = iconFrame
    iconCorner.CornerRadius = UDim.new(0, 10)
    
    local icon = Instance.new("TextLabel")
    icon.Parent = iconFrame
    icon.Size = UDim2.new(1, 0, 1, 0)
    icon.BackgroundTransparency = 1
    icon.Text = getgenv().AutoStopOnGodChalice and "üõ°Ô∏è" or "‚öîÔ∏è"
    icon.TextColor3 = Color3.fromRGB(255, 255, 255)
    icon.TextScaled = true
    icon.Font = Enum.Font.GothamBold
    
    local title = Instance.new("TextLabel")
    title.Parent = main
    title.BackgroundTransparency = 1
    title.Position = UDim2.new(0, 60, 0, 12)
    title.Size = UDim2.new(0, 120, 0, 20)
    title.Text = "God Chalice Protection"
    title.TextColor3 = Color3.fromRGB(220, 220, 220)
    title.TextScaled = true
    title.Font = Enum.Font.GothamBold
    title.TextXAlignment = Enum.TextXAlignment.Left
    
    local status = Instance.new("TextLabel")
    status.Parent = main
    status.BackgroundTransparency = 1
    status.Position = UDim2.new(0, 60, 0, 35)
    status.Size = UDim2.new(0, 100, 0, 20)
    status.Text = getgenv().AutoStopOnGodChalice and "üü¢ ACTIVE" or "üî¥ DISABLED"
    status.TextColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 100, 100)
    status.TextScaled = true
    status.Font = Enum.Font.GothamSemibold
    status.TextXAlignment = Enum.TextXAlignment.Left
    
    local button = Instance.new("TextButton")
    button.Parent = main
    button.BackgroundColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(150, 0, 0)
    button.BackgroundTransparency = 0.2
    button.BorderSizePixel = 0
    button.Position = UDim2.new(0, 185, 0.5, -15)
    button.Size = UDim2.new(0, 45, 0, 30)
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.Parent = button
    buttonCorner.CornerRadius = UDim.new(0, 8)
    
    local buttonText = Instance.new("TextLabel")
    buttonText.Parent = button
    buttonText.Size = UDim2.new(1, 0, 1, 0)
    buttonText.BackgroundTransparency = 1
    buttonText.Text = getgenv().AutoStopOnGodChalice and "ON" or "OFF"
    buttonText.TextColor3 = Color3.fromRGB(255, 255, 255)
    buttonText.TextScaled = true
    buttonText.Font = Enum.Font.GothamBold
    
    button.MouseButton1Click:Connect(function()
        getgenv().AutoStopOnGodChalice = not getgenv().AutoStopOnGodChalice
        getgenv().Chest_Farm = true
        
        iconFrame.BackgroundColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 180, 0) or Color3.fromRGB(180, 0, 0)
        icon.Text = getgenv().AutoStopOnGodChalice and "üõ°Ô∏è" or "‚öîÔ∏è"
        status.Text = getgenv().AutoStopOnGodChalice and "üü¢ ACTIVE" or "üî¥ DISABLED"
        status.TextColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 100, 100)
        button.BackgroundColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(150, 0, 0)
        buttonText.Text = getgenv().AutoStopOnGodChalice and "ON" or "OFF"
        
        saveSettings()
        print(getgenv().AutoStopOnGodChalice and "üü¢ God Chalice Protection: ACTIVE" or "üî¥ God Chalice Protection: DISABLED")
    end)
end)

-- üëë ÿßÿÆÿ™Ÿäÿßÿ± ŸÅÿ±ŸäŸÇ Pirates
spawn(function()
    wait(1.5)
    print("‚öîÔ∏è Selecting Pirates team...")
    local attempts = 0
    repeat
        attempts = attempts + 1
        pcall(function()
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("SetTeam", "Pirates")
        end)
        wait(0.5)
        if game.Players.LocalPlayer.Team and game.Players.LocalPlayer.Team.Name == "Pirates" then
            print("‚úÖ Pirates team selected!")
            break
        end
    until attempts >= 10
end)

-- üíé ŸÖÿ±ÿßŸÇÿ®ÿ© God Chalice Ÿà Fist of Darkness
spawn(function()
    while wait(1) do
        if getgenv().AutoStopOnGodChalice and getgenv().Chest_Farm then
            pcall(function()
                for _, o in pairs(workspace:GetDescendants()) do
                    if (o:IsA("Tool") or o:IsA("Part")) and (o.Name == "God Chalice" or o.Name == "Fist of Darkness") then
                        print("\n" .. string.rep("üíé", 50))
                        print("üíé " .. o.Name .. " DETECTED! üíé")
                        print("‚è∏Ô∏è Chest farm stopped - Go take your item!")
                        print(string.rep("üíé", 50) .. "\n")
                        
                        getgenv().Chest_Farm = false
                        
                        local n = Instance.new("ScreenGui")
                        n.Parent = game:GetService("CoreGui")
                        n.Name = "ItemAlert"
                        
                        local fr = Instance.new("Frame")
                        fr.Parent = n
                        fr.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
                        fr.BackgroundTransparency = 0.2
                        fr.Position = UDim2.new(0.5, -150, 0.5, -50)
                        fr.Size = UDim2.new(0, 300, 0, 100)
                        
                        local frCorner = Instance.new("UICorner")
                        frCorner.Parent = fr
                        frCorner.CornerRadius = UDim.new(0, 10)
                        
                        local tx = Instance.new("TextLabel")
                        tx.Parent = fr
                        tx.Size = UDim2.new(1, 0, 1, 0)
                        tx.BackgroundTransparency = 1
                        tx.Text = "üíé " .. o.Name .. " FOUND!\n‚è∏Ô∏è Farm Stopped"
                        tx.TextColor3 = Color3.fromRGB(255, 215, 0)
                        tx.TextScaled = true
                        tx.Font = Enum.Font.GothamBold
                        
                        wait(5)
                        n:Destroy()
                        break
                    end
                end
            end)
        end
    end
end)

-- üì¶ ŸÜÿ∏ÿßŸÖ ÿ¨ŸÖÿπ ÿßŸÑÿµÿØŸàÿ±
spawn(function()
    wait(3)
    while task.wait(0.25) do
        if getgenv().Chest_Farm and game.Players.LocalPlayer.Character then
            pcall(function()
                local hrp = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                if not hrp then return end
                
                local chests = {}
                for _, o in pairs(workspace:GetDescendants()) do
                    if o:IsA("BasePart") and (o.Name == "Chest3" or o.Name == "Chest2" or o.Name == "Chest1") then
                        table.insert(chests, {
                            part = o,
                            name = o.Name,
                            dist = (hrp.Position - o.Position).Magnitude,
                            priority = o.Name == "Chest3" and 1 or o.Name == "Chest2" and 2 or 3
                        })
                    end
                end
                
                table.sort(chests, function(a, b)
                    if a.priority == b.priority then return a.dist < b.dist end
                    return a.priority < b.priority
                end)
                
                for _, c in ipairs(chests) do
                    if not getgenv().Chest_Farm then break end
                    
                    hrp.CFrame = c.part.CFrame * CFrame.new(0, 2, 0)
                    task.wait(0.08)
                    
                    for i = 1, 4 do
                        firetouchinterest(hrp, c.part, 0)
                        task.wait(0.01)
                        firetouchinterest(hrp, c.part, 1)
                        task.wait(0.01)
                    end
                    
                    if c.name == "Chest3" then 
                        print("üí∞ Chest3 +2000") 
                    end
                end
            end)
        end
    end
end)

-- üî• ŸÉÿ¥ŸÅ ÿßŸÑŸÉŸäŸÉ
repeat wait() until game.CoreGui:FindFirstChild('RobloxPromptGui')
local po = game.CoreGui.RobloxPromptGui.promptOverlay
local ts = game:GetService('TeleportService')

po.ChildAdded:Connect(function(a)
    if a.Name == 'ErrorPrompt' then
        print("\nüö® KICK DETECTED! REJOINING...")
        repeat
            ts:Teleport(game.PlaceId)
            wait(2)
        until false
    end
end)

-- üîÑ ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ≥Ÿäÿ±ŸÅÿ±
local PlaceID = game.PlaceId
local AllIDs = {}
pcall(function() AllIDs = game:GetService('HttpService'):JSONDecode(readfile("NotSameServers.json")) end)

function TPReturner()
    local Site = game.HttpService:JSONDecode(game:HttpGet('https://games.roblox.com/v1/games/' .. PlaceID .. '/servers/Public?sortOrder=Asc&limit=100'))
    for _, v in pairs(Site.data) do
        if v.playing < v.maxPlayers then
            local ID = tostring(v.id)
            local possible = true
            for _, e in pairs(AllIDs) do 
                if ID == tostring(e) then 
                    possible = false 
                    break 
                end 
            end
            if possible then
                table.insert(AllIDs, ID)
                writefile("NotSameServers.json", game:GetService('HttpService'):JSONEncode(AllIDs))
                game:GetService("TeleportService"):TeleportToPlaceInstance(PlaceID, ID, game.Players.LocalPlayer)
                wait(4)
            end
        end
    end
end

function Teleport()
    print("üîÑ Server hopping...")
    TPReturner()
end

-- üöÄ ÿßŸÑŸÇŸÅÿ≤ ÿßŸÑÿπÿßÿØŸä
spawn(function()
    while wait() do
        if getgenv().Server_Hop then
            wait(getgenv().wait_Time)
            Teleport()
        end
    end
end)

-- ‚úÖ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿ™ŸÅÿπŸäŸÑ
print("\n" .. string.rep("‚ú®", 35))
print("‚ú® BLOX FRUITS ULTIMATE FARM V4 ‚ú®")
print("‚úÖ Made by Dev.Gani | Discord: d.6a")
print("‚úÖ Protection: " .. (getgenv().AutoStopOnGodChalice and "ACTIVE üü¢" or "DISABLED üî¥"))
print("‚úÖ Chest Farm: HYPER SPEED")
print("‚úÖ Settings: LOADED")
print(string.rep("‚ú®", 35) .. "\n") 
