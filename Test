-- ============================================
-- ğŸ”¥ BLOX FRUITS ULTIMATE FARM V5 ğŸ”¥
--      Made by Dev.Gani
--      Discord: d.6a
-- ============================================
print("\n" .. string.rep("ğŸ”¥", 50))
print("ğŸ”¥ BLOX FRUITS ULTIMATE FARM V5 ğŸ”¥")
print("      Made by Dev.Gani")
print("      Discord: d.6a")
print(string.rep("ğŸ”¥", 50) .. "\n")

-- âš¡ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
getgenv().Server_Hop = true
getgenv().Chest_Farm = true
getgenv().wait_Time = 90
getgenv().AutoStopOnGodChalice = true

-- ğŸ’¾ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª + Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù„Ù
local settingsFile = "DevGani_Settings.json"
local function loadSettings()
    local success, result = pcall(function()
        return game:GetService('HttpService'):JSONDecode(readfile(settingsFile))
    end)
    if success then
        getgenv().AutoStopOnGodChalice = result.AutoStopOnGodChalice
        print("âœ… Settings loaded: " .. (getgenv().AutoStopOnGodChalice and "ON" or "OFF"))
    else
        local defaultSettings = {AutoStopOnGodChalice = true}
        writefile(settingsFile, game:GetService('HttpService'):JSONEncode(defaultSettings))
        getgenv().AutoStopOnGodChalice = true
        print("ğŸ“ New settings file created - Auto-stop: ON")
    end
end
loadSettings()

-- ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
local function saveSettings()
    local settings = {AutoStopOnGodChalice = getgenv().AutoStopOnGodChalice}
    writefile(settingsFile, game:GetService('HttpService'):JSONEncode(settings))
end

-- ğŸ¨ Ø¥Ø´Ø¹Ø§Ø± Dev.Gani
spawn(function()
    wait(1)
    local gui = Instance.new("ScreenGui")
    gui.Name = "DevGaniNotif"
    gui.Parent = game:GetService("CoreGui")
    gui.ResetOnSpawn = false
    
    local frame = Instance.new("Frame")
    frame.Parent = gui
    frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    frame.BackgroundTransparency = 0.2
    frame.BorderSizePixel = 0
    frame.Position = UDim2.new(0.75, 0, 0.02, 0)
    frame.Size = UDim2.new(0.22, 0, 0.06, 0)
    
    local corner = Instance.new("UICorner")
    corner.Parent = frame
    corner.CornerRadius = UDim.new(0, 10)
    
    local text = Instance.new("TextLabel")
    text.Parent = frame
    text.Size = UDim2.new(1, 0, 1, 0)
    text.BackgroundTransparency = 1
    text.Text = "ğŸ”¥ Made by Dev.Gani\nğŸ’¬ Discord: d.6a"
    text.TextColor3 = Color3.fromRGB(255, 100, 100)
    text.TextScaled = true
    text.Font = Enum.Font.GothamBold
    text.TextStrokeTransparency = 0.5
    
    wait(20)
    gui:Destroy()
end)

-- ğŸ® Ø²Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø£Ù†ÙŠÙ‚ V2
spawn(function()
    wait(2)
    local s = Instance.new("ScreenGui")
    s.Name = "DevGaniControl"
    s.Parent = game:GetService("CoreGui")
    s.ResetOnSpawn = false
    s.IgnoreGuiInset = true
    
    local main = Instance.new("Frame")
    main.Parent = s
    main.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    main.BackgroundTransparency = 0.15
    main.BorderSizePixel = 0
    main.Position = UDim2.new(0.03, 0, 0.15, 0)
    main.Size = UDim2.new(0, 240, 0, 70)
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.Parent = main
    mainCorner.CornerRadius = UDim.new(0, 12)
    
    local stroke = Instance.new("UIStroke")
    stroke.Parent = main
    stroke.Color = Color3.fromRGB(80, 80, 80)
    stroke.Thickness = 1.5
    stroke.Transparency = 0.3
    
    local shadow = Instance.new("ImageLabel")
    shadow.Parent = main
    shadow.BackgroundTransparency = 1
    shadow.Position = UDim2.new(0, -5, 0, -5)
    shadow.Size = UDim2.new(1, 10, 1, 10)
    shadow.Image = "rbxassetid://1316045217"
    shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
    shadow.ImageTransparency = 0.7
    shadow.ScaleType = Enum.ScaleType.Slice
    shadow.SliceCenter = Rect.new(10, 10, 118, 118)
    
    local iconFrame = Instance.new("Frame")
    iconFrame.Parent = main
    iconFrame.BackgroundColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 180, 0) or Color3.fromRGB(180, 0, 0)
    iconFrame.BackgroundTransparency = 0.1
    iconFrame.BorderSizePixel = 0
    iconFrame.Position = UDim2.new(0, 10, 0.5, -20)
    iconFrame.Size = UDim2.new(0, 40, 0, 40)
    
    local iconCorner = Instance.new("UICorner")
    iconCorner.Parent = iconFrame
    iconCorner.CornerRadius = UDim.new(0, 10)
    
    local icon = Instance.new("TextLabel")
    icon.Parent = iconFrame
    icon.Size = UDim2.new(1, 0, 1, 0)
    icon.BackgroundTransparency = 1
    icon.Text = getgenv().AutoStopOnGodChalice and "ğŸ›¡ï¸" or "âš”ï¸"
    icon.TextColor3 = Color3.fromRGB(255, 255, 255)
    icon.TextScaled = true
    icon.Font = Enum.Font.GothamBold
    
    local title = Instance.new("TextLabel")
    title.Parent = main
    title.BackgroundTransparency = 1
    title.Position = UDim2.new(0, 60, 0, 12)
    title.Size = UDim2.new(0, 120, 0, 20)
    title.Text = "God Chalice Protection"
    title.TextColor3 = Color3.fromRGB(220, 220, 220)
    title.TextScaled = true
    title.Font = Enum.Font.GothamBold
    title.TextXAlignment = Enum.TextXAlignment.Left
    
    local status = Instance.new("TextLabel")
    status.Parent = main
    status.BackgroundTransparency = 1
    status.Position = UDim2.new(0, 60, 0, 35)
    status.Size = UDim2.new(0, 100, 0, 20)
    status.Text = getgenv().AutoStopOnGodChalice and "ğŸŸ¢ ACTIVE" or "ğŸ”´ DISABLED"
    status.TextColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 100, 100)
    status.TextScaled = true
    status.Font = Enum.Font.GothamSemibold
    status.TextXAlignment = Enum.TextXAlignment.Left
    
    local button = Instance.new("TextButton")
    button.Parent = main
    button.BackgroundColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(150, 0, 0)
    button.BackgroundTransparency = 0.2
    button.BorderSizePixel = 0
    button.Position = UDim2.new(0, 185, 0.5, -15)
    button.Size = UDim2.new(0, 45, 0, 30)
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.Parent = button
    buttonCorner.CornerRadius = UDim.new(0, 8)
    
    local buttonText = Instance.new("TextLabel")
    buttonText.Parent = button
    buttonText.Size = UDim2.new(1, 0, 1, 0)
    buttonText.BackgroundTransparency = 1
    buttonText.Text = getgenv().AutoStopOnGodChalice and "ON" or "OFF"
    buttonText.TextColor3 = Color3.fromRGB(255, 255, 255)
    buttonText.TextScaled = true
    buttonText.Font = Enum.Font.GothamBold
    
    button.MouseButton1Click:Connect(function()
        getgenv().AutoStopOnGodChalice = not getgenv().AutoStopOnGodChalice
        getgenv().Chest_Farm = true
        
        iconFrame.BackgroundColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 180, 0) or Color3.fromRGB(180, 0, 0)
        icon.Text = getgenv().AutoStopOnGodChalice and "ğŸ›¡ï¸" or "âš”ï¸"
        status.Text = getgenv().AutoStopOnGodChalice and "ğŸŸ¢ ACTIVE" or "ğŸ”´ DISABLED"
        status.TextColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 100, 100)
        button.BackgroundColor3 = getgenv().AutoStopOnGodChalice and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(150, 0, 0)
        buttonText.Text = getgenv().AutoStopOnGodChalice and "ON" or "OFF"
        
        saveSettings()
        print(getgenv().AutoStopOnGodChalice and "ğŸŸ¢ God Chalice Protection: ACTIVE" or "ğŸ”´ God Chalice Protection: DISABLED")
    end)
end)

-- ğŸ‘‘ Ø§Ø®ØªÙŠØ§Ø± ÙØ±ÙŠÙ‚ Pirates
spawn(function()
    wait(1.5)
    print("âš”ï¸ Selecting Pirates team...")
    local attempts = 0
    repeat
        attempts = attempts + 1
        pcall(function()
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("SetTeam", "Pirates")
        end)
        wait(0.5)
        if game.Players.LocalPlayer.Team and game.Players.LocalPlayer.Team.Name == "Pirates" then
            print("âœ… Pirates team selected!")
            break
        end
    until attempts >= 10
end)

-- ğŸ’ Ù…Ø±Ø§Ù‚Ø¨Ø© God Chalice Ùˆ Fist of Darkness
spawn(function()
    while wait(1) do
        if getgenv().AutoStopOnGodChalice and getgenv().Chest_Farm then
            pcall(function()
                for _, o in pairs(workspace:GetDescendants()) do
                    if (o:IsA("Tool") or o:IsA("Part")) and (o.Name == "God Chalice" or o.Name == "Fist of Darkness") then
                        print("\n" .. string.rep("ğŸ’", 50))
                        print("ğŸ’ " .. o.Name .. " DETECTED! ğŸ’")
                        print("â¸ï¸ Chest farm stopped - Go take your item!")
                        print(string.rep("ğŸ’", 50) .. "\n")
                        
                        getgenv().Chest_Farm = false
                        
                        local n = Instance.new("ScreenGui")
                        n.Parent = game:GetService("CoreGui")
                        n.Name = "ItemAlert"
                        
                        local fr = Instance.new("Frame")
                        fr.Parent = n
                        fr.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
                        fr.BackgroundTransparency = 0.2
                        fr.Position = UDim2.new(0.5, -150, 0.5, -50)
                        fr.Size = UDim2.new(0, 300, 0, 100)
                        
                        local frCorner = Instance.new("UICorner")
                        frCorner.Parent = fr
                        frCorner.CornerRadius = UDim.new(0, 10)
                        
                        local tx = Instance.new("TextLabel")
                        tx.Parent = fr
                        tx.Size = UDim2.new(1, 0, 1, 0)
                        tx.BackgroundTransparency = 1
                        tx.Text = "ğŸ’ " .. o.Name .. " FOUND!\nâ¸ï¸ Farm Stopped"
                        tx.TextColor3 = Color3.fromRGB(255, 215, 0)
                        tx.TextScaled = true
                        tx.Font = Enum.Font.GothamBold
                        
                        wait(5)
                        n:Destroy()
                        break
                    end
                end
            end)
        end
    end
end)

-- ğŸ“¦ Ù†Ø¸Ø§Ù… Ø¬Ù…Ø¹ Ø§Ù„ØµØ¯ÙˆØ± - Ø§Ù„ÙØ­Øµ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù€ TouchInterest âœ…
spawn(function()
    wait(3)
    while task.wait(0.25) do
        if getgenv().Chest_Farm and game.Players.LocalPlayer.Character then
            pcall(function()
                local hrp = game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                if not hrp then return end

                local chests = {}
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj:IsA("BasePart") and (obj.Name == "Chest3" or obj.Name == "Chest2" or obj.Name == "Chest1") then
                        
                        -- ğŸ” Ø§Ù„ÙØ­Øµ Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ: Ù‡Ù„ ÙÙŠ TouchInterest Ø¬ÙˆØ§ Ø§Ù„Ù€ ChestØŸ
                        local hasTouchInterest = false
                        for _, child in pairs(obj:GetDescendants()) do
                            if child:IsA("TouchTransmitter") then
                                hasTouchInterest = true
                                break
                            end
                        end

                        -- âœ… Ø¥Ø°Ø§ ÙÙŠÙ‡ TouchInterest, Ù†Ø¶ÙŠÙÙ‡ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
                        if hasTouchInterest then
                            table.insert(chests, {
                                part = obj,
                                name = obj.Name,
                                dist = (hrp.Position - obj.Position).Magnitude,
                                priority = obj.Name == "Chest3" and 1 or obj.Name == "Chest2" and 2 or 3
                            })
                        end
                        -- ğŸš« Ø¥Ø°Ø§ Ù…Ø§ ÙÙŠÙ‡ TouchInterest â†’ Ù†ØªØ®Ø·Ø§Ù‡ Ø¨Ø¯ÙˆÙ† Ø·Ø¨Ø§Ø¹Ø©
                    end
                end

                -- ğŸ“Š ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© ÙˆØ§Ù„Ù…Ø³Ø§ÙØ©
                table.sort(chests, function(a, b)
                    if a.priority == b.priority then 
                        return a.dist < b.dist 
                    end
                    return a.priority < b.priority
                end)

                -- ğŸ¯ Ø¨Ø³ Ù†Ø¬Ù…Ø¹ Ø§Ù„Ù„ÙŠ ÙÙŠÙ‡ TouchInterest
                for _, c in ipairs(chests) do
                    if not getgenv().Chest_Farm then break end

                    hrp.CFrame = c.part.CFrame * CFrame.new(0, 2, 0)
                    task.wait(0.08)

                    for i = 1, 4 do
                        firetouchinterest(hrp, c.part, 0)
                        task.wait(0.01)
                        firetouchinterest(hrp, c.part, 1)
                        task.wait(0.01)
                    end

                    if c.name == "Chest3" then 
                        print("ğŸ’° Chest3 +2000") 
                    end
                end
            end)
        end
    end
end)

-- ğŸ”¥ Ù†Ø¸Ø§Ù… Ø§Ù„Ø³ÙŠØ±ÙØ± Ù‡ÙˆÙ¾ Ù„Ù„ÙƒÙŠÙƒ
local PlaceID = game.PlaceId
local AllIDs = {}
local foundAnything = ""

pcall(function() 
    AllIDs = game:GetService('HttpService'):JSONDecode(readfile("NotSameServers.json")) 
end)

function TPReturner()
    local Site = game.HttpService:JSONDecode(game:HttpGet('https://games.roblox.com/v1/games/' .. PlaceID .. '/servers/Public?sortOrder=Asc&limit=100'))
    
    for _, v in pairs(Site.data) do
        if v.playing < v.maxPlayers then
            local ID = tostring(v.id)
            local possible = true
            
            for _, e in pairs(AllIDs) do 
                if ID == tostring(e) then 
                    possible = false 
                    break 
                end 
            end
            
            if possible then
                table.insert(AllIDs, ID)
                writefile("NotSameServers.json", game:GetService('HttpService'):JSONEncode(AllIDs))
                game:GetService("TeleportService"):TeleportToPlaceInstance(PlaceID, ID, game.Players.LocalPlayer)
                wait(4)
                return true
            end
        end
    end
    return false
end

-- ÙƒØ´Ù Ø§Ù„ÙƒÙŠÙƒ Ù…Ø¹ Ø³ÙŠØ±ÙØ± Ù‡ÙˆÙ¾
repeat wait() until game.CoreGui:FindFirstChild('RobloxPromptGui')
local po = game.CoreGui.RobloxPromptGui.promptOverlay

po.ChildAdded:Connect(function(a)
    if a.Name == 'ErrorPrompt' then
        print("\nğŸš¨ KICK DETECTED! FINDING NEW SERVER...")
        wait(1)
        
        local success = TPReturner()
        if not success then
            wait(2)
            TPReturner()
        end
    end
end)

function Teleport()
    print("ğŸ”„ Server hopping...")
    TPReturner()
end

-- ğŸš€ Ø§Ù„Ù‚ÙØ² Ø§Ù„Ø¹Ø§Ø¯ÙŠ
spawn(function()
    while wait() do
        if getgenv().Server_Hop then
            wait(getgenv().wait_Time)
            Teleport()
        end
    end
end)

-- âœ… Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙØ¹ÙŠÙ„
print("\n" .. string.rep("âœ¨", 35))
print("âœ¨ BLOX FRUITS ULTIMATE FARM V5 âœ¨")
print("âœ… Made by Dev.Gani | Discord: d.6a")
print("âœ… Protection: " .. (getgenv().AutoStopOnGodChalice and "ACTIVE ğŸŸ¢" or "DISABLED ğŸ”´"))
print("âœ… Chest Farm: SMART TOUCHINTEREST CHECK")
print("âœ… Only collects chests with TouchInterest")
print("âœ… Settings: LOADED")
print("âœ… Anti-Kick: SERVER HOP")
print(string.rep("âœ¨", 35) .. "\n")

end
